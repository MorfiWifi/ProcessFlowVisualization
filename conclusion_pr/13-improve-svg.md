# بهبود-SVG
در نظر بگیرید ما مهندسان نرم‌افزار هستیم و فرض کنید در یک شرکت بزرگ تولید کننده کالا هستیم و دارای خطوط تولید متعدد، توده‌های مواد خام، انبار و حمل و نقل داخلی (با استفاده از خطوط خودکار یا دستی با استفاده از کامیون) هستیم، و برای هر بخش از شرکت نرم‌افزار داریم، مثال نگهداری، تولید، مدیریت مواد خام، در حال حاضر از فایل‌های SVG به عنوان شماتیک‌های شرکت و با استفاده از Asp.Net استفاده می‌کنیم و این فایل‌های SVG را در صفحات Razor جاسازی می‌کنیم، اما با هر تغییر SVG مجبوریم کد C# را در فایل svg در فایل cshtml دوباره جاسازی کنیم، آیا راه بهتری برای انجام این کار وجود دارد؟

به نظر می‌رسد شما در تلاش برای مدیریت فایل‌های SVG هستید که نمایانگر اجزای مختلف سیستم تولید شما (مانند خطوط تولید، توده‌های مواد خام، انبار و غیره) هستند و آن‌ها را مستقیماً در صفحات Razor جاسازی می‌کنید. در حالی که جاسازی فایل‌های SVG به عنوان بخشی از کد C# امکان‌پذیر است، اما این رویکرد از نظر نگهداری و مقیاس‌پذیری بهترین نیست، به خصوص با رشد سیستم یا تغییرات مکرر SVG‌ها.

در اینجا چند رویکرد بهتر وجود دارد که می‌تواند گردش کار شما را بهبود بخشد و به جدا کردن کد C# شما از فایل‌های SVG کمک کند:

### 1. **فایل‌های SVG را جدا کنید و از تگ‌های تصویر یا SVG درون‌خطی استفاده کنید**
به جای جاسازی کل کد SVG در صفحات Razor خود، می‌توانید فایل‌های SVG را به طور جداگانه ذخیره کنید و از طریق تگ‌های `<img>` یا SVG درون‌خطی (با استفاده از تگ `<svg>` مستقیماً در HTML) به آن‌ها ارجاع دهید.

برای مثال:
```html
<img src="/images/production-line.svg" alt="خط تولید" />
```
این کار صفحات Razor شما را تمیزتر نگه می‌دارد و SVGها را از منطق کسب و کار جدا می‌کند. اگر نیاز به دستکاری پویای SVG دارید، می‌توانید آن را از طریق جاوا اسکریپت در DOM بارگیری کنید.

### 2. **بارگیری پویای SVG با جاوا اسکریپت (AJAX یا Fetch)**
اگر نیاز به تغییر یا تعامل پویا با SVGهای خود بر اساس شرایط خاصی دارید (به عنوان مثال، به‌روزرسانی‌های وضعیت در زمان واقعی)، می‌توانید محتوای SVG را از طریق درخواست‌های AJAX یا `fetch` در صفحه بارگیری کنید و DOM را با جاوا اسکریپت دستکاری کنید. این کار به صفحه Razor شما اجازه می‌دهد تمیز بماند، در حالی که همچنان به شما انعطاف‌پذیری برای تعامل با عناصر SVG را می‌دهد.

مثال با جاوا اسکریپت:
```javascript
fetch('/images/production-line.svg')
    .then(response => response.text())
    .then(svg => {
        document.getElementById('svg-container').innerHTML = svg;
    });
```

به این ترتیب، فایل‌های SVG شما همچنان به طور جداگانه ذخیره می‌شوند، اما می‌توانید آن‌ها را در صورت نیاز به صورت پویا در صفحه خود بارگیری کنید.

### 3. **از SVG Sprites استفاده کنید**
اگر آیکون‌ها یا نمودارهای SVG زیادی دارید و باید در مکان‌های مختلف در سراسر صفحه دوباره استفاده شوند، می‌توانید از یک SVG sprite sheet استفاده کنید. این کار به شما امکان می‌دهد چندین SVG را در یک فایل بسته‌بندی کنید، درخواست‌های HTTP را کاهش دهید و نشانه‌گذاری خود را ساده کنید.

مثال:
```html
<svg class="icon">
  <use xlink:href="/images/sprite.svg#production-line"></use>
</svg>
```

می‌توانید این sprites را با استفاده از ابزارهایی مانند [SVGOMG](https://jakearchibald.github.io/svgomg/) تولید کنید یا آن‌ها را به طور خودکار به عنوان بخشی از فرآیند ساخت خود بسازید.

### 4. **از کتابخانه‌های جاوا اسکریپت برای تعامل پویای SVG استفاده کنید**
برای یک تنظیم پیچیده‌تر، استفاده از کتابخانه‌های جاوا اسکریپت مانند [SVG.js](https://svgjs.dev/) یا [D3.js](https://d3js.org/) را برای دستکاری عناصر SVG خود در نظر بگیرید. این کتابخانه‌ها به شما امکان می‌دهند تجسم‌های پویا، تعاملی و مبتنی بر داده ایجاد کنید. آن‌ها می‌توانند به شما در به‌روزرسانی بخش‌هایی از SVG خود (به عنوان مثال، خطوط تولید یا مسیرهای حمل و نقل) بر اساس داده‌های زمان واقعی کمک کنند.

### 5. **کامپوننت‌های وب را در نظر بگیرید (اختیاری)**
اگر نیاز به کپسوله کردن SVG و منطق آن دارید، می‌توانید از کامپوننت‌های وب استفاده کنید. با کامپوننت‌های وب، می‌توانید عناصر سفارشی قابل استفاده مجدد ایجاد کنید که هم رندر و هم منطق مرتبط با SVGهای شما را مدیریت می‌کنند.

مثالی از یک عنصر سفارشی برای یک SVG:
```html
<my-production-line status="active"></my-production-line>
```

کامپوننت `my-production-line` می‌تواند SVG مربوطه را بارگیری کند، استایل‌ها را اعمال کند و تعامل را ارائه دهد، و منطق را از صفحه Razor شما جدا کند.

### 6. **از یک چارچوب CSS برای تعامل استفاده کنید (مانند SCADA)**
اگر SVG شما برای نظارت بر خطوط تولید استفاده می‌شود و شامل به‌روزرسانی‌های زنده زیادی است، ممکن است بخواهید یکپارچه‌سازی فایل‌های SVG خود در یک سیستم SCADA (کنترل نظارتی و اکتساب داده) یا چارچوب تجسم مشابه را در نظر بگیرید، که می‌تواند وضعیت‌های سیستم را ردیابی کند و به‌روزرسانی‌های در زمان واقعی را فعال کند.

### نتیجه گیری
برای اینکه راه حل شما قابل نگهداری‌تر باشد:
1. **فایل‌های SVG را از کد C# جدا کنید**—SVGها را به عنوان فایل ذخیره کنید و به صورت پویا از طریق جاوا اسکریپت یا تگ‌های `‎<svg>‎` درون‌خطی به آن‌ها ارجاع دهید.
2. **از جاسازی SVGها به طور مستقیم در نماهای Razor خودداری کنید** مگر اینکه کاملاً ضروری باشد.
3. **از جاوا اسکریپت برای مدیریت به‌روزرسانی‌های پویا به SVGها** بر اساس تغییرات وضعیت سیستم استفاده کنید.

این کار کد شما را ساده می‌کند و امکان تفکیک بهتر دغدغه‌ها بین UI و منطق کسب و کار را فراهم می‌کند، در حالی که به شما انعطاف‌پذیری برای مدیریت تغییرات و تعاملات SVG به طور موثرتر را می‌دهد.

---