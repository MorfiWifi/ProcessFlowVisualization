# Leaflet

**Leaflet** یک کتابخانه جاوا اسکریپت سبک و متن‌باز است که برای ایجاد نقشه‌های تعاملی در برنامه‌های وب استفاده می‌شود. این کتابخانه یک راه آسان برای ادغام و نمایش نقشه‌ها با ویژگی‌های مختلف، مانند نشانگرها، پنجره‌های بازشو، بزرگ‌نمایی و غیره را به روشی ساده و کارآمد ارائه می‌دهد.

### ویژگی‌های کلیدی Leaflet:

1. **نمایش نقشه**: Leaflet به شما امکان می‌دهد نقشه‌ها را در برنامه‌های وب خود جاسازی کنید. می‌توانید از ارائه‌دهندگان کاشی مختلف (مانند OpenStreetMap، Google Maps یا Mapbox) برای نمایش کاشی‌های نقشه استفاده کنید.

2. **نشانگرها و پنجره‌های بازشو**: می‌توانید نشانگرها را به نقشه اضافه کنید که می‌توانند تعاملی باشند. نشانگرها می‌توانند هنگام کلیک، پنجره‌های بازشو را نمایش دهند و اطلاعات یا داده‌های اضافی را نشان دهند.

3. **بزرگ‌نمایی و پیمایش**: Leaflet از بزرگ‌نمایی و پیمایش پشتیبانی می‌کند و به کاربران امکان می‌دهد به راحتی در اطراف نقشه حرکت کنند. همچنین از کنترل‌های تعاملی برای بزرگ‌نمایی و تغییر نوع نقشه پشتیبانی می‌کند.

4. **کنترل لایه**: Leaflet به شما امکان می‌دهد با چندین لایه نقشه (مانند ماهواره، زمین یا نماهای خیابان) کار کنید و کاربران می‌توانند بر اساس ترجیحات خود بین این لایه‌ها جابجا شوند.

5. **موقعیت جغرافیایی**: از موقعیت جغرافیایی پشتیبانی می‌کند، بنابراین می‌توانید موقعیت فعلی کاربر را روی نقشه ردیابی و نمایش دهید.

6. **لایه‌های سفارشی**: Leaflet به شما امکان می‌دهد لایه‌های سفارشی، از جمله پوشش‌های تصویر، لایه‌های برداری (به عنوان مثال، چندضلعی‌ها و خطوط) یا حتی داده‌های GeoJSON خارجی را برای نمایش اطلاعات جغرافیایی اضافه کنید.

7. **مدیریت رویداد**: دارای یک سیستم قوی برای مدیریت رویدادها است، بنابراین می‌توانید اقدامات سفارشی را روی رویدادهای نقشه مانند کلیک، بزرگ‌نمایی یا حرکات ماوس اضافه کنید.

8. **دوستانه موبایل**: Leaflet به گونه‌ای طراحی شده است که پاسخگو باشد و به خوبی روی دستگاه‌های دسکتاپ و موبایل کار می‌کند و حتی در صفحه‌های کوچک تعاملات روانی را ارائه می‌دهد.

9. **پلاگین‌ها**: Leaflet دارای یک اکوسیستم غنی از پلاگین‌ها است که عملکرد آن را گسترش می‌دهند و ویژگی‌هایی مانند نقشه‌های حرارتی، مسیریابی، زمین‌کدگذاری و حتی تجسم‌های سه‌بعدی را اضافه می‌کنند.

10. **قابل تنظیم**: تقریباً هر جنبه‌ای از نقشه، از ظاهر نشانگرها گرفته تا رفتار کنترل‌ها و لایه‌های نقشه، قابل تنظیم است.

### موارد استفاده رایج برای Leaflet:

- **نقشه‌های تعاملی**: برای نمایش نقشه‌های پویا با ویژگی‌های تعاملی مانند بزرگ‌نمایی، پیمایش و نشانگرهای قابل کلیک استفاده می‌شود.
- **برنامه‌های مبتنی بر مکان**: ایده‌آل برای برنامه‌هایی که نیاز به نمایش داده‌های مبتنی بر مکان دارند، مانند پلتفرم‌های املاک، ردیابی تحویل یا برنامه‌های گردشگری.
- **تجسم داده**: می‌توانید داده‌های جغرافیایی را تجسم کنید، مانند ترسیم نقاط روی نقشه، نشان دادن مناطق با نقشه‌های حرارتی یا رسم چندضلعی‌ها برای نمایش مناطق مورد علاقه.
- **تجزیه و تحلیل مکانی**: Leaflet می‌تواند برای کارهای مکانی پیشرفته‌تر، مانند رسم مسیرها، محاسبه فواصل یا نشان دادن داده‌های ارتفاع استفاده شود.

### مثال مورد استفاده:

- **وب‌سایت املاک**: یک وب‌سایت که املاک موجود را روی نقشه نمایش می‌دهد. کاربران می‌توانند نقشه را بزرگ‌نمایی و کوچک‌نمایی کنند، روی نشانگرها کلیک کنند تا جزئیات ملک را ببینند و املاک را بر اساس مکان فیلتر کنند.
- **برنامه آب و هوا**: یک برنامه آب و هوا که الگوهای آب و هوایی، مانند طوفان‌ها یا ناهنجاری‌های دمایی را روی یک نقشه تعاملی نمایش می‌دهد.
- **برنامه‌ریز مسیر**: یک سرویس برای ترسیم مسیرهای پیاده‌روی یا رانندگی، نمایش مسیر روی نقشه و ارائه زمان‌های تخمینی رسیدن.

### مزایای Leaflet:
- **سبک**: این یک کتابخانه مینیمالیستی و سریع است که آن را برای برنامه‌های وب دوستانه موبایل مناسب می‌کند.
- **آسان برای استفاده**: API آن به آسانی قابل استفاده است و می‌توانید تنها با چند خط کد شروع کنید.
- **بسیار قابل تنظیم**: Leaflet با اکوسیستم گسترده پلاگین و توانایی ادغام لایه‌ها و کنترل‌های سفارشی، بسیار قابل تنظیم است.

به طور خلاصه، Leaflet یک انتخاب عالی است زمانی که به یک راه‌حل سبک و انعطاف‌پذیر برای افزودن نقشه‌های تعاملی به پروژه‌های وب خود نیاز دارید.

---
در اینجا یک نمونه کد Leaflet.js برای تولید یک نقشه ساده با سه گره (نشان دهنده نقاط روی یک شبکه برق) و مسیرها (نشان دهنده خطوط شبکه بین آنها) با برچسب هایی که ولتاژ را روی هر مسیر و نام گره نشان می دهد، آمده است.

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نقشه شبکه برق</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <style>
        #map {
            height: 500px;
            width: 100%;
        }
    </style>
</head>
<body>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Initialize the map
        const map = L.map('map').setView([51.505, -0.09], 13);  // Centered on a random location

        // Add a tile layer (OpenStreetMap in this case)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Define the nodes with coordinates (latitude, longitude)
        const nodes = [
            { name: 'گره 1', lat: 51.505, lng: -0.09, voltage: 'ولتاژ پایین' },
            { name: 'گره 2', lat: 51.515, lng: -0.10, voltage: 'ولتاژ پایین' },
            { name: 'گره 3', lat: 51.525, lng: -0.08, voltage: 'ولتاژ پایین' }
        ];

        // Function to add nodes to the map
        nodes.forEach(node => {
            const marker = L.marker([node.lat, node.lng]).addTo(map);
            marker.bindPopup(`<b>${node.name}</b><br>ولتاژ: ${node.voltage}`);
            marker.bindTooltip(node.name).openTooltip();
        });

        // Function to draw lines between nodes
        const path = [
            [nodes[0].lat, nodes[0].lng],
            [nodes[1].lat, nodes[1].lng],
            [nodes[2].lat, nodes[2].lng]
        ];

        // Create a polyline (path) and style it to resemble a power grid line
        const powerLine = L.polyline(path, {
            color: 'red',
            weight: 4,
            opacity: 0.6
        }).addTo(map);

        // Add voltage labels on each segment of the path (edge)
        for (let i = 0; i < path.length - 1; i++) {
            const midLat = (path[i][0] + path[i + 1][0]) / 2;
            const midLng = (path[i][1] + path[i + 1][1]) / 2;

            L.marker([midLat, midLng])
                .bindPopup(`<b>ولتاژ: ولتاژ پایین</b>`)
                .addTo(map);
        }

    </script>
</body>
</html>
```
![تصویر نتیجه یک شبکه ساده](/resources/Leaflet/images/sample-3.PNG)

### شرح:
1. **تنظیم نقشه**: نقشه در یک مکان تصادفی (`51.505, -0.09`) متمرکز شده است، اما می توانید مختصات را به هر چیزی که شبکه شما نیاز دارد تغییر دهید.
2. **گره‌ها**: سه گره با نام (`گره 1`, `گره 2`, `گره 3`) و برچسب گذاری ولتاژ پایین تعریف شده اند.
3. **نشانگرها**: هر گره با یک نشانگر نشان داده می شود که یک پنجره بازشو با نام و ولتاژ را نشان می دهد.
4. **مسیرها (خطوط شبکه برق)**: یک چندخطی کشیده شده است که گره ها را به هم متصل می کند و یک خط شبکه برق (به رنگ قرمز) را نشان می دهد. هر بخش بین گره ها دارای یک برچسب ولتاژ است.
5. **برچسب های ولتاژ**: بخش های مسیر دارای یک پنجره بازشو هستند که "ولتاژ پایین" را نشان می دهد (برای سادگی). در صورت نیاز می توان این برچسب ها را برای نشان دادن ولتاژهای مختلف برای هر بخش تغییر داد.

در صورت نیاز، مختصات و سبک را مطابق با مورد استفاده خود تنظیم کنید.

---